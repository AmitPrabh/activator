<article class="plugin provider">
  <section class="activate">
    <div class="tabs-navigation">
      <img src="/public/images/monitoring/newrelic.png">
      <ul>
        <li data-bind="css: { active: selectedTab() == 'notice' }, click: function(){selectedTab('notice')} ">
          About
        </li>
        <li data-bind="css: { active: selectedTab() == 'download' }, click: function(){selectedTab('download')} ">
          Download
        </li>
        <li data-bind="css: { active: selectedTab() == 'configure' }, click: function(){selectedTab('configure')} ">
          Configure
        </li>
        <li data-bind="css: { active: selectedTab() == 'running' }, click: function(){selectedTab('running')} ">
          Running
        </li>
      </ul>
    </div>
    <div class="tabs-step notice" data-bind="css: { openned: selectedTab() == 'notice' }">
        <h2>About New Relic</h2>
        <dl class="notice-list">
            <dt>Download, Configure and Run with New Relic Monitoring Enabled</dt>
            <dd>Activator can be used to configure and run your application locally with New Relic gathering monitoring information.</dd>
            <dd>Use the 'Download' and 'Configure' steps here below to get started.</dd>
            <dd>New Relic can be used predominantly as a Play application monitoring tool.</dd>
            <dt>New Relic Dashboard</dt>
            <dd>The monitoring data is pushed to the New Relic server and shown in a separate dashboard.</dd>
            <dd>See New Relic documentation for more information about how to use the dashboard.</dd>
            <dt>Potential Latency</dt>
            <dd>There might be some latency using New Relic monitoring as data has to be pushed, gathered and presented remotely.</dd>
            <dd>Make sure you give New Relic some time to gather the data and also that there is some sort of activity in your application.</dd>
            <dt>About Activator Inspect and New Relic</dt>
            <dd>New Relic and Activator Inspect both use Java agents to gather data and they cannot be run simultaneously.</dd>
            <dd>Use Inspect when you want to try monitor the behavior of your application quickly and locally.</dd>
            <dd>New Relic should be used for production monitoring.</dd>
            <dt>Next Steps</dt>
            <dd>Click on the 'Got It' button here below to continue with the New Relic setup.</dd>
        </dl>
        <p>
          <button class="button" data-bind="click: function(){selectedTab('download')} ">Got it</button>
        </p>
    </div>
    <div class="tabs-step download"  data-bind="css: { openned: selectedTab() == 'download' }">
      <!-- ko if: needProvision -->
      <h2>Get the New Relic Agent</h2>
      <p>The New Relic Agent collects data about your application. Let us install it for you.</p>
      <p>
        <button class="button big install" data-bind="click: provisionNewRelic">Download</button>
      </p>
      <p data-bind="visible: downloading"><span data-bind="text: downloading"></span></p>
      <p class="error" data-bind="visible: error, text: error"></p>
      <!-- /ko -->
    </div>
    <div class="tabs-step configure" data-bind="css: { openned: selectedTab() == 'configure' }">
      <h2>Enter Licence Key</h2>
      <p>To get your licence key, you must <a href="https://www.newrelic.com/typesafe" target="_blank">Sign Up</a> or <a href="https://rpm.newrelic.com/" target="_blank">Login</a> to a New Relic account.</p>
      <p>Thereafter your licence key is available in the application setup screen (<a href="/public/plugins/monitoring/newrelic/LicenseKey.png" target="_blank">see this screenshot</a>)</p>
      <p>
        <input type="text" id="licenseKey" data-bind="value: licenseKey, valueUpdate: 'input'"/>
        <button class="button" data-bind="click: saveLicenseKey">Save</button>
      </p>
      <!-- ko ifnot: needProvision-->
      <h2>You're ready to go!</h2>
      <p>
        The New Relic Agent has been downloaded and your key configured.  You may enable New Relic for <a href="http://www.playframework.com/" target="_blank">Play</a>-based templates
        from the <a href="#run">run</a> tab.
      </p>
      <p><button data-bind="click: resetKey">Reset key</button></p>
      <!-- /ko -->
      <p class="error" data-bind="visible: error, text: error"></p>
    </div>
    <div class="tabs-step running" data-bind="css: { openned: selectedTab() == 'running' }">
      <h2>Steps to set up and run with New Relic Monitoring</h2>
      <ol class="notice-list">
        <li><a data-bind="click: function(){selectedTab('download')}">Download</a> the Java Agent</li>
        <li>Configure it <a data-bind="click: function(){selectedTab('configure')}">here</a></li>
        <li>Go to the <a href="#run">Run section</a></li>
        <li>Choose <b>NewRelic</b> as preferred monitoring tool</li>
        <li>Run your app clicking the run button (see image bellow)</li>
      </ol>
      <img src="/assets/help/newrelic-run.png" width="424">
    </div>
  </section>
</article>
